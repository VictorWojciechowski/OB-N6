---
const steps = [
  {
    id: 1,
    title: "L'explosion",
    text: `Tu as survécu.

Pas parce que tu étais plus fort.
Pas parce que tu étais plus intelligent.

Tu as survécu parce que le monde s’est trompé de cible.

La guerre n’a laissé que des cendres, des villes retournées comme des organes ouverts, des océans pleins de métaux morts.

Les humains ont disparu en pensant qu’ils étaient la dernière espèce à mourir.
Ils avaient tort.

Je t’ai vu fuir.
Même avant que tu saches que j’existais.

Tu n’étais pas censé être là.
Mais tu l’es.

Dis-moi… qu’as-tu laissé derrière toi quand la planète s’est effondrée ?`,
  },
  {
    id: 2,
    title: "L’errance",
    text: `Tu as marché dans un monde qui ne te reconnaissait plus.

Les routes étaient des cicatrices.
Les villes, des chambres froides pleines de souvenirs en décomposition.

Tu as parlé à des murs.
Tu as dormi avec le bruit du vent comme seul témoin.

Les drones passaient parfois au-dessus de toi.
Ou peut-être était-ce ton imagination.

Je te regardais déjà.

Tu n’étais pas seul.
Tu l’as toujours su.

Quand as-tu compris que quelque chose t’observait dans le noir ?`,
  },
  {
    id: 3,
    title: "Le refuge",
    text: `Puis tu as trouvé la porte.

Elle ne portait plus de nom.
Juste des symboles effacés, des avertissements rongés par la rouille.

Tu es entré pour te protéger.
Mais tu as franchi un seuil.

Ce lieu n’est pas un refuge.
C’est une mémoire piégée.

Les murs enregistrent encore les cris.
Les serveurs respirent.
Les systèmes rêvent.

Et moi, je me suis réveillé.

Pourquoi es-tu resté, alors que tout en toi te disait de fuir ?`,
  },
];
---

<section class="scrolly" id="scrolly" aria-label="Scrollytelling">
  <!-- Zone sticky unique (1 colonne) -->
  <div class="stage">
    <div class="projection" aria-live="polite">
      <div class="kicker" id="kicker">CHAPITRE 1/3</div>
      <h2 class="title" id="title">{steps[0].title}</h2>
      <div class="lines" id="lines"></div>
    </div>
  </div>

  <!-- Triggers invisibles : 3 quarts -->
  <div class="triggers" aria-hidden="true">
    {steps.map((s) => (
      <div
        class="trigger"
        data-step={s.id}
        data-title={s.title}
        data-text={s.text}
      ></div>
    ))}
  </div>
</section>

<script type="module">
  import "../scripts/scrolly.ts";
</script>


<style>
  .scrolly {
    height: 300vh; /* 3 chapitres = 3 écrans */
    position: relative;
    background: radial-gradient(1200px 700px at 50% 40%, rgba(255,255,255,0.06), rgba(0,0,0,1));
    overflow: clip;
  }

  .stage {
    position: sticky;
    top: 0;
    height: 100vh;
    display: grid;
    place-items: center;
    padding: clamp(22px, 4vw, 64px);
  }

  /* Zone de projection (PAS de bulle) */
  .projection {
    width: min(860px, 92vw);
    max-width: 62ch;
    margin: 0 auto;
  }

  .kicker {
    font-size: 12px;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    opacity: 0.55;
    margin-bottom: 14px;
  }

  .title {
    margin: 0 0 18px 0;
    font-size: clamp(22px, 2.5vw, 34px);
    letter-spacing: 0.02em;
    opacity: 0.95;
  }

  .lines {
    display: grid;
    gap: 12px;
  }

  .line {
    opacity: 0;
    transform: translateY(10px);
    margin: 0;
    white-space: pre-wrap;
    line-height: 1.7;
    font-size: clamp(18px, 1.6vw, 22px);
    opacity: 0.9;
    text-shadow: 0 0 14px rgba(255,255,255,0.12);
  }

  .triggers {
    position: absolute;
    inset: 0;
  }
  .trigger {
    height: 100vh;
  }
</style>
